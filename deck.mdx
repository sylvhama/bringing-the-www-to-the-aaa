export { default as theme } from "./theme";

import { Head } from "mdx-deck";
import { Appear } from "mdx-deck";
import { Image } from "mdx-deck";
import { Split } from "mdx-deck/layouts";
import { CodeSurfer } from "mdx-deck-code-surfer";
import vsDark from "prism-react-renderer/themes/vsDark";

import Intro from "./components/Intro";

<Head>
  <title>Bringing the WWW to the AAA</title>
</Head>

<Intro title="Bringing the WWW to the AAA" />

---

🥐 Sylvain Hamann

👨‍💻 Web Developer

🇫🇷 ✈️ 🇰🇷 ✈️ 🇯🇵 ✈️ 🇨🇦

🐤 [@sylvhama](https://twitter.com/sylvhama/)

---

import UbiMtl from "./components/UbiMtl";

<UbiMtl />

---

## What's Ubisoft Club? 🤔

---

<img src={require("file-loader!./images/ps4.png")} />

<img src={require("file-loader!./images/x1.png")} />

export default Split;

---

<iframe
  src="https://drive.google.com/file/d/16ORqJdP_OsOptNuwRqaF6PszLUHpWBCK/preview"
  width="1344"
  height="756"
/>

---

<iframe
  src="https://drive.google.com/file/d/1yw0XSu0JDe9SBfX5b35E7_wnNCG3ggtH/preview"
  width="1344"
  height="756"
/>

---

## UI for a TV Screen 📺

<ul style={{ textAlign: "left" }}>
  <Appear>
    <li>User comes from the game</li>
    <li>1920x1080 viewport</li>
    <li>Two Web Browsers</li>
    <li>Adaptive Web Design</li>
    <li>Pre-defined scrollable areas</li>
    <li>Internationalization (20 languages)</li>
    <li>Performance (CDN, BFF, Code splitting...)</li>
    <li>Visual / Behavior restrictions imposed by Sony or Microsoft</li>
  </Appear>
</ul>

---

Did you know? X and ◯ behaviors are reversed in Japan.

<img src={require("file-loader!./images/japan.png")} />

---

## Process

1. Dev on Chrome (react / redux devtoools)
2. Continuous Integration and Deployment via GitLab 🦊
3. Test on a dev kit via a fake game

But not everyone can have a dev kit 😟

---

## Storybook + "PC" build

<img
  style={{ width: "100%", maxHeight: "80vh" }}
  src={require("file-loader!./images/storybook.gif")}
/>

---

## Gamepad Navigation 🎮

The user isn't using a keyboard or a mouse!<br />
However the gamepad is firing keyboard events. 🤪

---

<Image src={require("file-loader!./images/reduxdevtools.gif")} size="contain" />

---

<CodeSurfer
  title="Global event listener"
  code={require("!raw-loader!./snippets/onKeyDown.js")}
  lang="js"
  showNumbers={false}
  theme={vsDark}
  steps={[
    { range: [1, 42] },
    { range: [10, 17], notes: "Special events" },
    {
      range: [18, 22],
      notes: "User would like to focus an element on the left"
    }
  ]}
/>

---

<CodeSurfer
  title="Action Creators"
  code={require("!raw-loader!./snippets/actions.js")}
  lang="js"
  showNumbers={false}
  theme={vsDark}
  steps={[{ range: [1, 24] }]}
/>

---

<CodeSurfer
  title="State's shape (redux store)"
  code={require("!raw-loader!./snippets/exampleState.js")}
  lang="js"
  showNumbers={false}
  theme={vsDark}
  steps={[
    { range: [1, 24] },
    { range: [2, 18], notes: "Each node is represented as: {id: nodeDetails}" },
    {
      range: [6, 15],
      notes: "Element.getBoundingClientRect() or custom values"
    },
    { range: [19, 20], notes: "Used for isFocus and accessibility (tabIndex)" },
    { lines: [21], notes: "Used by modals" },
    { lines: [22], notes: "Used when leaving a modal" }
  ]}
/>

---

<CodeSurfer
  title="Navigation Button example"
  code={require("!raw-loader!./snippets/login.jsx")}
  lang="jsx"
  showNumbers={false}
  theme={vsDark}
  steps={[
    { range: [1, 14] },
    { lines: [2], notes: "Unique id to register" },
    { lines: [3], notes: "Render Props pattern" },
    { lines: [5], notes: "Register node" },
    { lines: [6], notes: "Pass isFocused as a prop" },
    { lines: [7, 8], notes: "Basic browser API" }
  ]}
/>

---

<CodeSurfer
  title="Button styled-component"
  code={require("!raw-loader!./snippets/Button.js")}
  lang="js"
  showNumbers={false}
  theme={vsDark}
  steps={[
    { range: [1, 29] },
    { range: [16, 21], notes: "background-color is based on props" }
  ]}
/>

---

<CodeSurfer
  title="FocusContainer"
  code={require("!raw-loader!./snippets/FocusContainer.js")}
  lang="js"
  showNumbers={false}
  theme={vsDark}
  steps={[
    { range: [1, 69] },
    { range: [6, 10] },
    { range: [12, 16] },
    { range: [23, 41], notes: "Register node" },
    { range: [43, 46] },
    { range: [48, 53] },
    { range: [54, 62] }
  ]}
/>

---

## HOOKS ⚓

### Join the Battle!

---

<CodeSurfer
  title="FocusProvider"
  code={require("!raw-loader!./snippets/FocusProvider.js")}
  lang="jsx"
  showNumbers={false}
  theme={vsDark}
  steps={[
    { range: [1, 40] },
    { lines: [2] },
    { range: [19, 24] },
    { range: [26, 38] }
  ]}
/>

---

<CodeSurfer
  title="Custom hook: useFocusContext"
  code={require("!raw-loader!./snippets/useFocusContext.js")}
  lang="jsx"
  showNumbers={false}
  theme={vsDark}
  notes={"Would replace the need of a Higher Order Component"}
/>

---

<CodeSurfer
  title="Custom Hook: useFocus"
  code={require("!raw-loader!./snippets/useFocus.js")}
  lang="js"
  showNumbers={false}
  theme={vsDark}
  steps={[
    { range: [1, 68] },
    { range: [39, 45], notes: "No more life cycle methods" },
    { range: [48, 62], notes: "Almost the same" }
  ]}
/>

---

<CodeSurfer
  title="Example"
  code={require("!raw-loader!./snippets/hooks-example.js")}
  lang="jsx"
  showNumbers={false}
  theme={vsDark}
  steps={[
    { range: [1, 31] },
    { lines: [6], notes: "Init" },
    { range: [11, 18], notes: "Same logic as before but without render props!" }
  ]}
/>

---

## Keep it simple, stupid 👌

---

## Merci

### BTW those slides were made with [mdx-deck](https://github.com/jxnblk/mdx-deck) ❤️
